> table_test1
# A tibble: 30 x 13
   X__2   X__1 厂商指导价 车辆归属地 品牌id 车系id  车型id   里程 最高有效出价 检测等级
   <chr> <dbl>      <dbl> <chr>       <dbl>  <dbl>   <dbl>  <dbl>        <dbl> <chr>   
 1 343     500      12.6  重庆市       1.00    614    5694  27676        66800 三级    
 2 352     521      19.4  北京市       1.00    333   13730  56268       101000 三级    
 3 476     692      12.0  深圳市       8.00   2871    4876  24266        78000 二级    
 4 404     598       9.98 苏州市       1.00    207    9617 162569        36900 三级    
 5 443     647      20.9  成都市      38.0     166    7371  84129       125600 二级    
 6 383     570      11.3  温州市      62.0    2886 9001123  11396        82600 一级    
 7 249     380      12.0  苏州市      63.0     425    8388 127971        27700 二级    
 8 168     259      67.5  上海市      36.0     197   12429 102347       212200 四级    
 9 478     696      12.5  宁波市      67.0     519   10808  55060        40100 三级    
10 427     627      22.0  太原市       1.00    496    6228  98058       138300 三级    
# ... with 20 more rows, and 3 more variables: 有效出价数量 <dbl>, 商户成交价 <dbl>,
#   贬值率 <dbl>
> table_test1[,8]
# A tibble: 30 x 1
     里程
    <dbl>
 1  27676
 2  56268
 3  24266
 4 162569
 5  84129
 6  11396
 7 127971
 8 102347
 9  55060
10  98058
# ... with 20 more rows
> x=table_test1[,8]
> x
# A tibble: 30 x 1
     里程
    <dbl>
 1  27676
 2  56268
 3  24266
 4 162569
 5  84129
 6  11396
 7 127971
 8 102347
 9  55060
10  98058
# ... with 20 more rows
> mean(x)
[1] NA
Warning message:
In mean.default(x) : 参数不是数值也不是逻辑值：回覆NA
> mean(x,)
[1] NA
Warning message:
In mean.default(x, ) : 参数不是数值也不是逻辑值：回覆NA
> x=attach(x)
> x
<environment: 0x7fec5195aee0>
attr(,"name")
[1] "x"
> mean('里程')
[1] NA
Warning message:
In mean.default("里程") : 参数不是数值也不是逻辑值：回覆NA
> apply(table_test1,8,mean)
Error in if (d2 == 0L) { : 需要TRUE/FALSE值的地方不可以用缺少值
> apply(table_test1,2,mean)
        X__2         X__1   厂商指导价   车辆归属地       品牌id       车系id       车型id 
          NA           NA           NA           NA           NA           NA           NA 
        里程 最高有效出价     检测等级 有效出价数量   商户成交价       贬值率 
          NA           NA           NA           NA           NA           NA 
There were 13 warnings (use warnings() to see them)
> apply(table_test1,mean)
Error in match.fun(FUN) : 缺少参数"FUN",也没有缺省值
> x=table_test1[,8]
> mean(x,trim=0,na.rm=FALSE)
[1] NA
Warning message:
In mean.default(x, trim = 0, na.rm = FALSE) :
  参数不是数值也不是逻辑值：回覆NA
> apply(x,2,mean)
    里程 
78221.17 
> xst=apply(x,2,mean)
> table_test
# A tibble: 497 x 14
   X__2   X__1 厂商指导价 车辆归属地 品牌id 车系id  车型id   里程 最高有效出价 检测等级
   <chr> <dbl>      <dbl> <chr>       <dbl>  <dbl>   <dbl>  <dbl>        <dbl> <chr>   
 1 1      2.00      37.6  成都市      73.0   383      3630  28181       200200 二级    
 2 2      4.00      13.2  成都市      38.0   875      6944  96507        16800 四级    
 3 3      5.00      20.0  南京市       8.00  577     14067  84933        91300 三级    
 4 4      8.00      12.9  南京市      67.0   519     14773  17898        80000 二级    
 5 5     11.0       50.0  南京市      15.0    65.0    6808  26146       402200 二级    
 6 6     12.0       16.3  南京市       1.00  442     11598  71671        60900 三级    
 7 7     14.0       20.9  南京市      38.0   166      3281 106014       121000 三级    
 8 8     16.0        6.98 成都市      62.0   454      8858 103385        19100 三级    
 9 9     17.0       16.0  成都市      38.0  2896      7222  66815        90900 二级    
10 10    18.0       12.5  南京市       1.00  614   9005852  26512        91500 三级    
# ... with 487 more rows, and 4 more variables: 有效出价数量 <dbl>, 商户成交价 <dbl>,
#   贬值率 <dbl>, 按里程分层类别 <dbl>
> x2=table_test[,8]
> x2
# A tibble: 497 x 1
     里程
    <dbl>
 1  28181
 2  96507
 3  84933
 4  17898
 5  26146
 6  71671
 7 106014
 8 103385
 9  66815
10  26512
# ... with 487 more rows
> xmean=apply(x,2,mean)
> xmean
    里程 
78221.17 
> xmean=apply(x2,2,mean)
> xmean
    里程 
72888.72 
> y=table_test1[,13]
> y
# A tibble: 30 x 1
   贬值率
    <dbl>
 1  0.529
 2  0.510
 3  0.636
 4  0.363
 5  0.583
 6  0.730
 7  0.225
 8  0.306
 9  0.311
10  0.614
# ... with 20 more rows
> yst=apply(y,2,mean)
> yst
   贬值率 
0.4465784 
> y2=table_test[,13]
> y2
# A tibble: 497 x 1
   贬值率
    <dbl>
 1  0.512
 2  0.125
 3  0.451
 4  0.607
 5  0.785
 6  0.374
 7  0.561
 8  0.272
 9  0.553
10  0.717
# ... with 487 more rows
> y2mean=apply(y2,2,mean)
> y2mean
   贬值率 
0.4633779 
> R=yst/xst
> R
      贬值率 
5.709176e-06 
> y2p=R*xmean
> y2p
   贬值率 
0.4161345 
> table_test1[,13]
# A tibble: 30 x 1
   贬值率
    <dbl>
 1  0.529
 2  0.510
 3  0.636
 4  0.363
 5  0.583
 6  0.730
 7  0.225
 8  0.306
 9  0.311
10  0.614
# ... with 20 more rows
> x=table_test1[,13]-yst
> x
         贬值率
1   0.082412861
2   0.063741515
3   0.189481698
4  -0.083852951
5   0.136675186
6   0.283031527
7  -0.221202776
8  -0.140800624
9  -0.135129243
10  0.167616320
11 -0.327640758
12  0.003196710
13 -0.107868725
14 -0.042173998
15  0.247180669
16  0.072776436
17 -0.247722894
18 -0.153100141
19 -0.041022847
20  0.131913563
21 -0.259879684
22  0.026571090
23 -0.028876539
24  0.123485292
25 -0.086508958
26 -0.023501479
27  0.209918291
28 -0.050745069
29  0.213658986
30 -0.001633457
> xst
    里程 
78221.17 
> ys=table_test1[,13]-yst
> xs=table_test1[,8]-xst
> xs
          里程
1  -50545.1667
2  -21953.1667
3  -53955.1667
4   84347.8333
5    5907.8333
6  -66825.1667
7   49749.8333
8   24125.8333
9  -23161.1667
10  19836.8333
11 175951.8333
12  19230.8333
13   5661.8333
14  -8299.1667
15 -77250.1667
16 -14036.1667
17  77870.8333
18  30392.8333
19  23824.8333
20 -45794.1667
21   7774.8333
22   1805.8333
23 -24914.1667
24  15969.8333
25   -581.1667
26 -38461.1667
27 -46659.1667
28 -18559.1667
29 -56566.1667
30   5108.8333
> Syx=sum(ys*xs)
> Syx
[1] -177114.6
> ys*xs
          贬值率
1   -4165.571777
2   -1399.328106
3  -10223.516591
4   -7072.814766
5     807.454221
6  -18913.628951
7  -11004.801250
8   -3396.932400
9    3129.750917
10   3324.977008
11 -57648.992031
12     61.475401
13   -610.734742
14    350.009037
15 -19094.747866
16  -1021.502191
17 -19290.388222
18  -4653.147081
19   -977.362486
20  -6040.871695
21  -2020.521232
22     47.982960
23    719.434903
24   1972.039532
25     50.276123
26    903.894308
27  -9794.612513
28    941.786192
29 -12085.869838
30     -8.345061
> xst
    里程 
78221.17 
> b=Syx/sxt
错误: 找不到对象'sxt'
> b=Syx/xst
> b
    里程 
-2.26428 
> b=Syx/var(table_test1[,8])
> b
              里程
里程 -6.673743e-05
> var(table_test1[,8])
           里程
里程 2653901973
> table_test1[,8]
# A tibble: 30 x 1
     里程
    <dbl>
 1  27676
 2  56268
 3  24266
 4 162569
 5  84129
 6  11396
 7 127971
 8 102347
 9  55060
10  98058
# ... with 20 more rows
> var(table_test1[,8])
           里程
里程 2653901973
> x3=table_test1[,8]
> vx=apply(x3,2,var)
> vx
      里程 
2653901973 
> 